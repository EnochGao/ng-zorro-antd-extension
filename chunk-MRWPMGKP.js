import{Ca as y,Ed as _,Fd as E,Jd as L,Kd as h,M as k,U as w,X as F,ba as I,ea as v,f as b,g as T,ga as a,n as C,od as l,pc as A}from"./chunk-OGFJLPPA.js";import{a as g}from"./chunk-UKNGC2Y4.js";function M(s){return s.buttons===0||s.detail===0}function x(s){let c=s.touches&&s.touches[0]||s.changedTouches&&s.changedTouches[0];return!!c&&c.identifier===-1&&(c.radiusX==null||c.radiusX===1)&&(c.radiusY==null||c.radiusY===1)}var N=new v("cdk-input-modality-detector-options"),D={ignoreKeys:[18,17,224,91,16]},O=650,d=E({passive:!0,capture:!0}),R=(()=>{class s{get mostRecentModality(){return this._modality.value}constructor(t,e,i,n){this._platform=t,this._mostRecentTarget=null,this._modality=new T(null),this._lastTouchMs=0,this._onKeydown=r=>{this._options?.ignoreKeys?.some(o=>o===r.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=h(r))},this._onMousedown=r=>{Date.now()-this._lastTouchMs<O||(this._modality.next(M(r)?"keyboard":"mouse"),this._mostRecentTarget=h(r))},this._onTouchstart=r=>{if(x(r)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=h(r)},this._options=g(g({},D),n),this.modalityDetected=this._modality.pipe(w(1)),this.modalityChanged=this.modalityDetected.pipe(k()),t.isBrowser&&e.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,d),i.addEventListener("mousedown",this._onMousedown,d),i.addEventListener("touchstart",this._onTouchstart,d)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,d),document.removeEventListener("mousedown",this._onMousedown,d),document.removeEventListener("touchstart",this._onTouchstart,d))}static{this.\u0275fac=function(e){return new(e||s)(a(_),a(y),a(A),a(N,8))}}static{this.\u0275prov=I({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var f=function(s){return s[s.IMMEDIATE=0]="IMMEDIATE",s[s.EVENTUAL=1]="EVENTUAL",s}(f||{}),S=new v("cdk-focus-monitor-default-options"),m=E({passive:!0,capture:!0}),Fe=(()=>{class s{constructor(t,e,i,n,r){this._ngZone=t,this._platform=e,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new b,this._rootNodeFocusAndBlurListener=o=>{let p=h(o);for(let u=p;u;u=u.parentElement)o.type==="focus"?this._onFocus(o,u):this._onBlur(o,u)},this._document=n,this._detectionMode=r?.detectionMode||f.IMMEDIATE}monitor(t,e=!1){let i=l(t);if(!this._platform.isBrowser||i.nodeType!==1)return C();let n=L(i)||this._getDocument(),r=this._elementInfo.get(i);if(r)return e&&(r.checkChildren=!0),r.subject;let o={checkChildren:e,subject:new b,rootNode:n};return this._elementInfo.set(i,o),this._registerGlobalListeners(o),o.subject}stopMonitoring(t){let e=l(t),i=this._elementInfo.get(e);i&&(i.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(i))}focusVia(t,e,i){let n=l(t),r=this._getDocument().activeElement;n===r?this._getClosestElementsInfo(n).forEach(([o,p])=>this._originChanged(o,e,p)):(this._setOrigin(e),typeof n.focus=="function"&&n.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===f.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,e){t.classList.toggle("cdk-focused",!!e),t.classList.toggle("cdk-touch-focused",e==="touch"),t.classList.toggle("cdk-keyboard-focused",e==="keyboard"),t.classList.toggle("cdk-mouse-focused",e==="mouse"),t.classList.toggle("cdk-program-focused",e==="program")}_setOrigin(t,e=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&e,this._detectionMode===f.IMMEDIATE){clearTimeout(this._originTimeoutId);let i=this._originFromTouchInteraction?O:1;this._originTimeoutId=setTimeout(()=>this._origin=null,i)}})}_onFocus(t,e){let i=this._elementInfo.get(e),n=h(t);!i||!i.checkChildren&&e!==n||this._originChanged(e,this._getFocusOrigin(n),i)}_onBlur(t,e){let i=this._elementInfo.get(e);!i||i.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(i,null))}_emitOrigin(t,e){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let e=t.rootNode,i=this._rootNodeFocusListenerCount.get(e)||0;i||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,m),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,m)}),this._rootNodeFocusListenerCount.set(e,i+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(F(this._stopInputModalityDetector)).subscribe(n=>{this._setOrigin(n,!0)}))}_removeGlobalListeners(t){let e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){let i=this._rootNodeFocusListenerCount.get(e);i>1?this._rootNodeFocusListenerCount.set(e,i-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,m),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,m),this._rootNodeFocusListenerCount.delete(e))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,e,i){this._setClasses(t,e),this._emitOrigin(i,e),this._lastFocusOrigin=e}_getClosestElementsInfo(t){let e=[];return this._elementInfo.forEach((i,n)=>{(n===t||i.checkChildren&&n.contains(t))&&e.push([n,i])}),e}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:e,mostRecentModality:i}=this._inputModalityDetector;if(i!=="mouse"||!e||e===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let n=t.labels;if(n){for(let r=0;r<n.length;r++)if(n[r].contains(e))return!0}return!1}static{this.\u0275fac=function(e){return new(e||s)(a(y),a(_),a(R),a(A,8),a(S,8))}}static{this.\u0275prov=I({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{M as a,x as b,Fe as c};
