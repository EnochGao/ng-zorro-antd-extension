[{"path":"configurable-query/configurable-query.component.html","content":"<div class=\"container\">\n  <div>例子1： 自定义拓展查询职业等级,姓名必填</div>\n\n  <nzx-configurable-query\n    [controls]=\"controls\"\n    (queryChange)=\"queryParams = $event\"\n    (resetChange)=\"queryParams = $event\"\n  >\n    <ng-template nzxControl=\"level\" let-formControl>\n      <nz-rate [formControl]=\"formControl\" nzAllowHalf></nz-rate>\n    </ng-template>\n  </nzx-configurable-query>\n\n  查询参数：\n  <pre>\n  {{ queryParams | json }}\n  </pre>\n\n  <div>例子2： 一行展示</div>\n  <nzx-configurable-query\n    [nzxCollapse]=\"false\"\n    [controls]=\"controls2\"\n    (queryChange)=\"queryParams2 = $event\"\n    (resetChange)=\"queryParams2 = $event\"\n  >\n  </nzx-configurable-query>\n\n  查询参数：\n  <pre>\n  {{ queryParams2 | json }}\n  </pre>\n\n  <div>例子3： 全展示禁用折叠</div>\n  <nzx-configurable-query\n    [nzxCollapse]=\"false\"\n    [nzxBtnSpan]=\"24\"\n    [controls]=\"controls3\"\n    (queryChange)=\"queryParams3 = $event\"\n    (resetChange)=\"queryParams3 = $event\"\n  >\n    <ng-template nzxControl=\"level\" let-formControl>\n      <nz-rate [formControl]=\"formControl\" nzAllowHalf></nz-rate>\n    </ng-template>\n  </nzx-configurable-query>\n\n  查询参数：\n  <pre>\n  {{ queryParams3 | json }}\n  </pre>\n\n  <div>例子4： 一行展示两个control</div>\n  <nzx-configurable-query\n    [controls]=\"controls4\"\n    [lineNumber]=\"2\"\n    [nzxBtnSpan]=\"24\"\n    (queryChange)=\"queryParams4 = $event\"\n    (resetChange)=\"queryParams4 = $event\"\n  >\n    <ng-template nzxControl=\"level\" let-formControl>\n      <nz-rate [formControl]=\"formControl\" nzAllowHalf></nz-rate>\n    </ng-template>\n  </nzx-configurable-query>\n\n  查询参数：\n  <pre>\n  {{ queryParams4 | json }}\n  </pre>\n\n  <div>例子5： 简化查询</div>\n\n  <nzx-configurable-query\n    [controls]=\"controls5\"\n    [lineNumber]=\"2\"\n    [nzxBtnSpan]=\"24\"\n    (queryChange)=\"queryParams5 = $event\"\n    (resetChange)=\"queryParams5 = $event\"\n  >\n    <ng-template nzxControl=\"level\" let-formControl>\n      <nz-rate [formControl]=\"formControl\" nzAllowHalf></nz-rate>\n    </ng-template>\n  </nzx-configurable-query>\n\n  查询参数：\n  <pre>\n  {{ queryParams5 | json }}\n  </pre>\n\n  <div>例子6： 初始化界面主动查询</div>\n\n  <nzx-configurable-query\n    [controls]=\"controls6\"\n    [lineNumber]=\"2\"\n    [initQuery]=\"true\"\n    (queryChange)=\"queryParams6 = $event\"\n    (resetChange)=\"queryParams6 = $event\"\n  >\n    <ng-template nzxControl=\"level\" let-formControl>\n      <nz-rate [formControl]=\"formControl\" nzAllowHalf></nz-rate>\n    </ng-template>\n  </nzx-configurable-query>\n\n  查询参数：\n  <pre>\n  {{ queryParams6 | json }}\n  </pre>\n\n  <div>例子7： 模拟远程加载下拉</div>\n  <nzx-configurable-query\n    #query7\n    [controls]=\"controls7\"\n    [initQuery]=\"true\"\n    [nzxCollapse]=\"false\"\n    (queryChange)=\"queryParams7 = $event\"\n    (resetChange)=\"queryParams7 = $event\"\n  >\n  </nzx-configurable-query>\n  查询参数：\n  <pre>\n  {{ queryParams7 | json }}\n  </pre>\n\n  <div>例子8：缺省固定参数</div>\n  <nzx-configurable-query\n    #query8\n    [controls]=\"controls8\"\n    [fixedParams]=\"{ enabled: true }\"\n    [nzxCollapse]=\"false\"\n    (queryChange)=\"queryParams8 = $event\"\n    (resetChange)=\"queryParams8 = $event\"\n  >\n  </nzx-configurable-query>\n  查询参数：\n  <pre>\n  {{ queryParams8 | json }}\n  </pre>\n\n  <div>例子9：缓存查询参数</div>\n  <nzx-configurable-query\n    #query9\n    [controls]=\"controls9\"\n    [initQuery]=\"true\"\n    [fixedParams]=\"{ enabled: true }\"\n    [nzxCollapse]=\"false\"\n    (queryChange)=\"queryChange($event)\"\n    (resetChange)=\"queryChange($event)\"\n  >\n  </nzx-configurable-query>\n  查询参数：\n  <pre>\n  {{ queryParams9 | json }}\n  </pre>\n\n  <div>例子10： 动态添加删除控件</div>\n  <nz-space>\n    <button\n      *nzSpaceItem\n      nz-button\n      nzType=\"primary\"\n      nzSize=\"small\"\n      (click)=\"addGender()\"\n    >\n      add gender\n    </button>\n    <button\n      *nzSpaceItem\n      nz-button\n      nzType=\"primary\"\n      nzSize=\"small\"\n      (click)=\"addLevel()\"\n    >\n      add level\n    </button>\n    <button\n      *nzSpaceItem\n      nz-button\n      nzType=\"primary\"\n      nzSize=\"small\"\n      (click)=\"removeLevel()\"\n    >\n      remove level\n    </button>\n  </nz-space>\n\n  <ng-template #levelRef let-formControl>\n    <nz-rate [formControl]=\"formControl\" nzAllowHalf></nz-rate>\n  </ng-template>\n\n  <nzx-configurable-query\n    #query10\n    [controls]=\"controls10\"\n    (queryChange)=\"queryParams10 = $event\"\n    (resetChange)=\"queryParams10 = $event\"\n  >\n  </nzx-configurable-query>\n\n  查询参数：\n  <pre>\n  {{ queryParams10 | json }}\n  </pre>\n</div>\n"},{"path":"configurable-query/configurable-query.component.scss","content":".container {\n  padding: 20px;\n  background-color: #ccc;\n}\n"},{"path":"configurable-query/configurable-query.component.ts","content":"import { CommonModule } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  OnInit,\n  TemplateRef,\n  ViewChild,\n} from '@angular/core';\nimport { FormControl, ReactiveFormsModule, Validators } from '@angular/forms';\n\nimport { NzRateModule } from 'ng-zorro-antd/rate';\n\nimport {\n  NzxConfigurableQueryComponent,\n  NzxConfigurableQueryModule,\n} from 'ng-zorro-antd-extension/configurable-query';\nimport {\n  NzxQueryControlOptions,\n  NzxQueryParams,\n} from 'ng-zorro-antd-extension/configurable-query/type';\n\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzSpaceModule } from 'ng-zorro-antd/space';\n\n@Component({\n  selector: 'nzx-configurable-query-demo',\n  templateUrl: './configurable-query.component.html',\n  styleUrls: ['./configurable-query.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  standalone: true,\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    NzRateModule,\n    NzxConfigurableQueryModule,\n    NzButtonModule,\n    NzSpaceModule,\n  ],\n})\nexport class NzxConfigurableQueryExampleComponent implements OnInit {\n  queryParams: NzxQueryParams = {};\n\n  controls: Array<NzxQueryControlOptions> = [\n    {\n      controlName: 'name',\n      label: '姓名',\n      placeholder: '姓名',\n      controlType: 'input',\n      controlInstance: new FormControl(null, [Validators.required]),\n      errorTip: '必填',\n    },\n    {\n      controlName: 'gender',\n      label: '性别',\n      placeholder: '请选择',\n      controlType: 'select',\n      menuList: [\n        { label: '男', value: 1 },\n        { label: '女', value: 2 },\n      ],\n      nzxAllowClear: true,\n    },\n    {\n      controlName: 'birthday',\n      label: '出生日期',\n      placeholder: '日期',\n      controlType: 'datePicker',\n      collapse: true,\n    },\n    {\n      controlName: 'level',\n      label: '职业等级',\n      controlType: 'Template',\n      collapse: true,\n    },\n  ];\n  queryParams2: NzxQueryParams = {};\n\n  controls2: Array<NzxQueryControlOptions> = [\n    {\n      controlName: 'name',\n      label: '姓名',\n      placeholder: '姓名',\n      controlType: 'input',\n    },\n    {\n      controlName: 'birthday',\n      label: '出生日期',\n      placeholder: '日期',\n      controlType: 'datePicker',\n    },\n  ];\n  queryParams3: NzxQueryParams = {};\n\n  controls3: Array<NzxQueryControlOptions> = [\n    {\n      controlName: 'name',\n      label: '姓名',\n      placeholder: '姓名',\n      controlType: 'input',\n    },\n    {\n      controlName: 'gender',\n      label: '性别',\n      placeholder: '请选择',\n      controlType: 'select',\n      menuList: [\n        { label: '男', value: 1 },\n        { label: '女', value: 2 },\n      ],\n      controlInstance: new FormControl(1, [Validators.required]),\n      errorTip: '假设必填默认',\n      nzxAllowClear: true,\n    },\n    {\n      controlName: 'birthday',\n      label: '出生日期',\n      placeholder: '日期',\n      controlType: 'datePicker',\n      collapse: true,\n    },\n    {\n      controlName: 'level',\n      label: '职业等级',\n      controlType: 'Template',\n      collapse: true,\n    },\n  ];\n  queryParams4: NzxQueryParams = {};\n\n  controls4: Array<NzxQueryControlOptions> = [\n    {\n      controlName: 'name',\n      label: '姓名',\n      placeholder: '姓名',\n      controlType: 'input',\n    },\n    {\n      controlName: 'gender',\n      label: '性别',\n      placeholder: '请选择',\n      controlType: 'select',\n      menuList: [\n        { label: '男', value: 1 },\n        { label: '女', value: 2 },\n      ],\n      controlInstance: new FormControl(1, [Validators.required]),\n      errorTip: '假设必填默认',\n      nzxAllowClear: true,\n    },\n    {\n      controlName: 'birthday',\n      label: '出生日期',\n      placeholder: '日期',\n      controlType: 'datePicker',\n      collapse: true,\n    },\n    {\n      controlName: 'level',\n      label: '职业等级',\n      controlType: 'Template',\n      collapse: true,\n    },\n  ];\n  queryParams5: NzxQueryParams = {};\n\n  controls5: Array<NzxQueryControlOptions> = [\n    {\n      controlName: 'searchType',\n      placeholder: '请选择',\n      nzxSpan: 3,\n      nzxRSpan: 24,\n      controlType: 'select',\n      menuList: [\n        { label: '班级', value: 1 },\n        { label: '姓名', value: 2 },\n      ],\n      default: 1,\n    },\n    {\n      controlName: 'searchKey',\n      placeholder: '搜索内容',\n      nzxSpan: 9,\n      nzxRSpan: 24,\n      controlType: 'input',\n    },\n    {\n      controlName: 'name',\n      label: '姓名',\n      placeholder: '姓名',\n      controlType: 'input',\n    },\n    {\n      controlName: 'gender',\n      label: '性别',\n      placeholder: '请选择',\n      controlType: 'select',\n      menuList: [\n        { label: '男', value: 1 },\n        { label: '女', value: 2 },\n      ],\n      controlInstance: new FormControl(1, [Validators.required]),\n      errorTip: '假设必填默认',\n      nzxAllowClear: true,\n    },\n    {\n      controlName: 'birthday',\n      label: '出生日期',\n      placeholder: '日期',\n      controlType: 'datePicker',\n      collapse: true,\n    },\n    {\n      controlName: 'level',\n      label: '职业等级',\n      controlType: 'Template',\n      collapse: true,\n    },\n  ];\n  queryParams6: NzxQueryParams = {};\n\n  controls6: Array<NzxQueryControlOptions> = [\n    {\n      controlName: 'searchType',\n      placeholder: '请选择',\n      nzxSpan: 3,\n      nzxRSpan: 24,\n      controlType: 'select',\n      menuList: [\n        { label: '班级', value: 1 },\n        { label: '姓名', value: 2 },\n      ],\n      default: 1,\n    },\n    {\n      controlName: 'searchKey',\n      placeholder: '搜索内容',\n      nzxSpan: 9,\n      nzxRSpan: 24,\n      controlType: 'input',\n    },\n    {\n      controlName: 'name',\n      label: '姓名',\n      placeholder: '姓名',\n      controlType: 'input',\n      collapse: true,\n    },\n    {\n      controlName: 'gender',\n      label: '性别',\n      placeholder: '请选择',\n      controlType: 'select',\n      menuList: [\n        { label: '男', value: 1 },\n        { label: '女', value: 2 },\n      ],\n      controlInstance: new FormControl(1, [Validators.required]),\n      errorTip: '假设必填默认',\n      nzxAllowClear: true,\n      collapse: true,\n    },\n    {\n      controlName: 'birthday',\n      label: '出生日期',\n      placeholder: '日期',\n      controlType: 'datePicker',\n      collapse: true,\n    },\n    {\n      controlName: 'level',\n      label: '职业等级',\n      controlType: 'Template',\n      collapse: true,\n    },\n  ];\n\n  queryParams7: NzxQueryParams = {};\n\n  controls7: Array<NzxQueryControlOptions> = [\n    {\n      controlName: 'name',\n      label: '姓名',\n      placeholder: '姓名',\n      controlType: 'input',\n    },\n    {\n      controlName: 'city',\n      label: '城市',\n      placeholder: '城市',\n      controlType: 'select',\n      menuList: [\n        { label: '班级', value: 1 },\n        { label: '姓名', value: 2 },\n      ],\n    },\n  ];\n\n  cityList = [\n    { label: '青岛', value: '青岛' },\n    { label: '潍坊', value: '潍坊' },\n    { label: '烟台', value: '烟台' },\n  ];\n  @ViewChild('query7') private query7!: NzxConfigurableQueryComponent;\n\n  queryParams8: NzxQueryParams = {};\n  controls8: Array<NzxQueryControlOptions> = [\n    {\n      controlName: 'name',\n      label: '姓名',\n      placeholder: '姓名',\n      controlType: 'input',\n    },\n    {\n      controlName: 'city',\n      label: '城市',\n      placeholder: '城市',\n      controlType: 'select',\n      menuList: [\n        { label: '班级', value: 1 },\n        { label: '姓名', value: 2 },\n      ],\n    },\n  ];\n  @ViewChild('query8') private query8!: NzxConfigurableQueryComponent;\n\n  queryParams9: NzxQueryParams = {};\n  controls9: Array<NzxQueryControlOptions> = [\n    {\n      controlName: 'name',\n      label: '姓名',\n      placeholder: '姓名',\n      controlType: 'input',\n    },\n    {\n      controlName: 'city',\n      label: '城市',\n      placeholder: '城市',\n      controlType: 'select',\n      menuList: [\n        { label: '班级', value: 1 },\n        { label: '姓名', value: 2 },\n      ],\n    },\n  ];\n  @ViewChild('query9', { static: true })\n  private query9!: NzxConfigurableQueryComponent;\n\n  queryParams10: NzxQueryParams = {};\n\n  controls10: Array<NzxQueryControlOptions> = [\n    {\n      controlName: 'name',\n      label: '姓名',\n      placeholder: '姓名',\n      controlType: 'input',\n    },\n\n    {\n      controlName: 'birthday',\n      label: '出生日期',\n      placeholder: '日期',\n      controlType: 'datePicker',\n      collapse: true,\n    },\n  ];\n\n  @ViewChild('levelRef', { static: true })\n  private levelRef!: TemplateRef<any>;\n  @ViewChild('query10', { static: true })\n  private query10!: NzxConfigurableQueryComponent;\n\n  addGender() {\n    this.query10.addControl({\n      controlName: 'gender',\n      label: '性别',\n      placeholder: '请选择',\n      controlType: 'select',\n      menuList: [\n        { label: '男', value: 1 },\n        { label: '女', value: 2 },\n      ],\n      controlInstance: new FormControl(1, [Validators.required]),\n      errorTip: '假设必填默认',\n      nzxAllowClear: true,\n    });\n  }\n\n  addLevel() {\n    this.query10.addControl({\n      controlName: 'level',\n      label: '职业等级',\n      controlType: 'Template',\n      templateRef: this.levelRef,\n      collapse: true,\n    });\n  }\n\n  removeLevel() {\n    this.query10.removeControl('level');\n  }\n\n  ngOnInit(): void {\n    setTimeout(() => {\n      this.query7.setControl('city', { menuList: this.cityList });\n    }, 3000);\n    const cacheStr = sessionStorage.getItem('cacheParams');\n    if (cacheStr) {\n      this.query9.setQueryParams(JSON.parse(cacheStr));\n    }\n  }\n\n  queryChange(params: NzxQueryParams) {\n    sessionStorage.setItem('cacheParams', JSON.stringify(params));\n    console.log(params);\n    this.queryParams9 = params;\n  }\n}\n"},{"path":"examples.module.ts","content":"import { NzxConfigurableQueryExampleComponent } from './configurable-query/configurable-query.component';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n@NgModule({\n    declarations: [  ],\n    providers: [  ],\n    imports: [ CommonModule, NzxConfigurableQueryExampleComponent ],\n    exports: [  ]\n})\nexport class NzxConfigurableQueryExamplesModule {}\n"}]