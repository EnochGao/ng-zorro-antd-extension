import{ba as i,c as o,f as c,ga as b,od as u}from"./chunk-OGFJLPPA.js";var a=(()=>{class t{create(e){return typeof ResizeObserver>"u"?null:new ResizeObserver(e)}static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),D=(()=>{class t{constructor(e){this.nzResizeObserverFactory=e,this.observedElements=new Map}ngOnDestroy(){this.observedElements.forEach((e,s)=>this.cleanupObserver(s))}observe(e){let s=u(e);return new o(r=>{let v=this.observeElement(s).subscribe(r);return()=>{v.unsubscribe(),this.unobserveElement(s)}})}observeElement(e){if(this.observedElements.has(e))this.observedElements.get(e).count++;else{let s=new c,r=this.nzResizeObserverFactory.create(n=>s.next(n));r&&r.observe(e),this.observedElements.set(e,{observer:r,stream:s,count:1})}return this.observedElements.get(e).stream}unobserveElement(e){this.observedElements.has(e)&&(this.observedElements.get(e).count--,this.observedElements.get(e).count||this.cleanupObserver(e))}cleanupObserver(e){if(this.observedElements.has(e)){let{observer:s,stream:r}=this.observedElements.get(e);s&&s.disconnect(),r.complete(),this.observedElements.delete(e)}}static{this.\u0275fac=function(s){return new(s||t)(b(a))}}static{this.\u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();export{D as a};
